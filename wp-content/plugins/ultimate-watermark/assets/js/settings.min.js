jQuery(document).ready(function(s){var i;({frame:function(t){return this._frameWatermark||(this._frameWatermark=wp.media({title:ultimateWatermarkSettings.title,frame:ultimateWatermarkSettings.frame,button:ultimateWatermarkSettings.button,multiple:ultimateWatermarkSettings.multiple,library:{type:"image"}}),this._frameWatermark.on("open",this.updateFrame).state("library").on("select",this.select)),this._frameWatermark},select:function(){var t=this.frame.state().get("selection").first(),e=s(i).closest("td");if(i=null,-1!==s.inArray(t.attributes.mime,["image/gif","image/jpg","image/jpeg","image/png"])){e.find("input.attachment_id").val(t.attributes.id),e.find(".preview-image").find("img").attr("src",t.attributes.url),e.find(".preview-image").show(),e.find(".ultimate_watermark_remove_image_button").removeAttr("disabled");var a=new Image;a.src=t.attributes.url,a.onload=function(){e.find(".preview-image").find("p").html(ultimateWatermarkSettings.originalSize+": "+this.width+" "+ultimateWatermarkSettings.px+" / "+this.height+" "+ultimateWatermarkSettings.px)}}else e.find(".ultimate_watermark_remove_image_button").attr("disabled","true"),e.find("input.attachment_id").val(0),e.find(".preview-image").hide(),e.find(".preview-image").find("p").html("<strong>"+ultimateWatermarkSettings.notAllowedImg+"</strong>")},init:function(){var e=this;s("body").on("click",".ultimate_watermark_upload_image_button",function(t){t.preventDefault(),i=s(this),e.frame().open()}),e.initSlider(),e.displayConditions()},initSlider:function(){s(".ultimate-watermark-range-slider").each(function(){var a=s(this),i=a.find(".handle"),t=a.data("max"),e=a.data("min"),r=a.data("value"),m=a.data("step");a.slider({min:e,max:t,value:r,step:m,range:"min",create:function(){a.closest(".slider-wrap").find("input").val(s(this).slider("value")),i.text(s(this).slider("value"))},slide:function(t,e){i.text(e.value),a.closest(".slider-wrap").find("input").val(e.value)}})})},displayConditions:function(){s("body").on("change","#ultimate_watermark_watermark_on",function(){var t=s(this).val(),e=s('[id^="ultimate_watermark_watermark_on_custom_post_type"]').closest("tr");"selected_custom_post_types"===t?e.removeClass("ultimate-watermark-hide"):e.addClass("ultimate-watermark-hide")}),s("body").on("change","#ultimate_watermark_watermark_size_type",function(){var t=s(this).val(),e=s("#ultimate_watermark_absolute_width").closest("tr"),a=s("#ultimate_watermark_absolute_height").closest("tr"),i=s("#ultimate_watermark_scaled_image_width").closest("tr");"custom"===t?(e.removeClass("ultimate-watermark-hide"),a.removeClass("ultimate-watermark-hide"),i.addClass("ultimate-watermark-hide")):"scaled"===t?(e.addClass("ultimate-watermark-hide"),a.addClass("ultimate-watermark-hide"),i.removeClass("ultimate-watermark-hide")):(e.addClass("ultimate-watermark-hide"),a.addClass("ultimate-watermark-hide"),i.addClass("ultimate-watermark-hide"))})}}).init(),s(document).on("click",".ultimate_watermark_remove_image_button",function(t){s(this).attr("disabled","true"),s(this).closest("td").find("input.attachment_id").val(0),s(this).closest("td").find(".preview-image").hide()})});