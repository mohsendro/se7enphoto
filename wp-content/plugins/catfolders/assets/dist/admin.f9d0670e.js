var O=Object.defineProperty;var j=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(j(t,typeof e!="symbol"?e+"":e,n),n);import{j as d,a as o,S as B,m,r as b,c as C,I as x,C as V,p,R as $,s as H,E as M,b as q,F as J,_ as K,d as W}from"./SettingBanner.51929e18.js";const z=({name:t,onChange:e,defaultChecked:n})=>{function s(r){e({name:t,value:r.target.checked})}return d("div",{className:"catf-switch-wrapper",children:[o("input",{onChange:s,defaultChecked:n,id:t,type:"checkbox"}),o("label",{htmlFor:t})]})};const S=({header:t,actions:e,children:n})=>d("div",{className:"catf-setting-card",children:[o("div",{className:"catf-setting-card-head",children:t}),o("div",{className:"catf-setting-card-content",children:n}),e&&o("div",{className:"catf-setting-card-actions",children:e})]}),{catfData:v,catfSettings:ve}=window,G=window.catfSettings.globalSettings,Q=()=>{function t(e){B.globalSetting(e).then(()=>{m.success(v.i18n.global.save_successfully)}).catch(n=>{m.error(v.i18n.global.something_went_wrong),console.log(n)})}return o(S,{header:v.i18n.global.user_restriction,actions:o("div",{dangerouslySetInnerHTML:{__html:v.i18n.global.view_our_document}}),children:d("div",{className:"catf-setting-card-panel",children:[v.i18n.global.user_mode_desc,o(z,{defaultChecked:G.userrestriction,name:"userrestriction",onChange:t})]})})};const{catfSettings:X,catfData:h,wp:Ce}=window,Y=()=>{const[t,e]=b.exports.useState(!1),[n,s]=b.exports.useState(""),[r,a]=b.exports.useState(X.pluginsToImport),c=i=>{const l=[...r],y=l.find(f=>f.prefix===i);y&&(y.folder_counter=-1),a(l)};function g(i){s(i),e(!0),x.getFolderStructure(i).then(()=>{x.getAttachmentInFolder(i).then(()=>{x.process(i).then(()=>{m.success(h.i18n.global.successfully),c(i),s(""),e(!1)}).catch(l=>{m.error(h.i18n.global.something_went_wrong),s(""),e(!1),console.log(l)})}).catch(l=>{m.error(h.i18n.global.something_went_wrong),s(""),e(!1),console.log(l)})}).catch(l=>{m.error(h.i18n.global.something_went_wrong),s(""),e(!1),console.log(l)})}return o(S,{header:h.i18n.global.import_from_other_plugin,actions:o("div",{dangerouslySetInnerHTML:{__html:h.i18n.global.more_plugins_to_import}}),children:o("ul",{className:"carf-setting-import-list",children:r.map(i=>d("li",{"data-plugin":i.prefix,className:C("carf-setting-import-item",{success:i.folder_counter==-1}),children:[d("div",{className:"carf-setting-import-item__title",children:[i.plugin_name," (",h.i18n.global.by," ",i.author,")",o("p",{children:i.folder_counter==-1?h.i18n.global.already_imported:i.folder_counter+" "+h.i18n.global.folders_found_to_import})]}),o("button",{onClick:()=>g(i.prefix),className:C("button","button-primary",{"updating-message":t&&i.prefix===n,disabled:t&&i.prefix!==n||i.folder_counter==-1}),children:h.i18n.global.import_now})]},i.prefix))})})};const{catfData:k}=window,Z=()=>{const[t,e]=b.exports.useState(!1);function n(){e(!0),V.cleanDB().then(()=>{e(!1),location.reload()}).catch(s=>{console.log(s),e(!1)})}return o(S,{header:k.i18n.global.clear_all_data,actions:o("div",{style:{textAlign:"right"},children:o("button",{onClick:n,className:C("button","button-danger",{"updating-message":t}),style:{pointerEvents:t?"none":"auto"},children:k.i18n.global.clear_now})}),children:o("p",{children:k.i18n.global.this_action_will_delete})})},ee=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),R=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),te=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),ne=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,n)=>new Set([...e,...n]),[])),se=(t,e)=>{e=e||ne(t);let n=e,s=e;R(e)&&(n=e.map(a=>a.label),s=e.map(a=>a.key));const r=t.map(a=>s.map(c=>oe(c,a)));return[n,...r]},oe=(t,e)=>{const n=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,r,a,c){const g=s[r];if(g==null)c.splice(1);else return g},e);return n===void 0?t in e?e[t]:"":n},ae=t=>typeof t>"u"||t===null?"":t,E=(t,e=",",n='"')=>t.filter(s=>s).map(s=>s.map(r=>ae(r)).map(r=>`${n}${r}${n}`).join(e)).join(`
`),re=(t,e,n,s)=>E(e?[e,...t]:t,n,s),ie=(t,e,n,s)=>E(se(t,e),n,s),ce=(t,e,n,s)=>e?`${e.join(n)}
${t}`:t.replace(/"/g,'""'),P=(t,e,n,s)=>{if(R(t))return ie(t,e,n,s);if(te(t))return re(t,e,n,s);if(typeof t=="string")return ce(t,e,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},A=(t,e,n,s,r)=>{const a=P(t,n,s,r),c=ee()?"application/csv":"text/csv",g=new Blob([e?"\uFEFF":"",a],{type:c}),i=`data:${c};charset=utf-8,${e?"\uFEFF":""}${a}`,l=window.URL||window.webkitURL;return typeof l.createObjectURL>"u"?i:l.createObjectURL(g)},U={data:p.exports.oneOfType([p.exports.string,p.exports.array,p.exports.func]).isRequired,headers:p.exports.array,target:p.exports.string,separator:p.exports.string,filename:p.exports.string,uFEFF:p.exports.bool,onClick:p.exports.func,asyncOnClick:p.exports.bool,enclosingCharacter:p.exports.string},T={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},le={target:"_blank"};class N extends $.Component{constructor(e){super(e),this.state={}}buildURI(){return A(...arguments)}componentDidMount(){const{data:e,headers:n,separator:s,enclosingCharacter:r,uFEFF:a,target:c,specs:g,replace:i}=this.props;this.state.page=window.open(this.buildURI(e,a,n,s,r),c,g,i)}getWindow(){return this.state.page}render(){return null}}w(N,"defaultProps",Object.assign(T,le)),w(N,"propTypes",U);class I extends $.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return A(...arguments)}handleLegacy(e,n=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:s,headers:r,separator:a,filename:c,enclosingCharacter:g,uFEFF:i}=this.props,l=n&&typeof s=="function"?s():s;let y=new Blob([i?"\uFEFF":"",P(l,r,a,g)]);return window.navigator.msSaveBlob(y,c),!1}}handleAsyncClick(e){const n=s=>{if(s===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,n)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:n,separator:s,filename:r,uFEFF:a,children:c,onClick:g,asyncOnClick:i,enclosingCharacter:l,...y}=this.props,_=typeof window>"u"?"":this.buildURI(e,a,n,s,l);return o("a",{download:r,...y,ref:L=>this.link=L,target:"_self",href:_,onClick:this.handleClick(),children:c})}}w(I,"defaultProps",T),w(I,"propTypes",U);const de=I,{catfData:u}=window,D=H.div`
  display: flex;
  margin-bottom: 10px;
  align-items: center;
`,ge=()=>{const[t,e]=b.exports.useState([]),[n,s]=b.exports.useState(!1),[r,a]=b.exports.useState(""),[c,g]=b.exports.useState(!1);function i(){s(!0),M.exportCSV().then(f=>{m.success(u.i18n.global.successfully),e(f.folders),s(!1)}).catch(f=>{m.error(u.i18n.global.something_went_wrong),s(!1),console.log(f)})}function l(f){const _=f.target.files;_!=null&&_.length&&a(_[0])}function y(){let f=new FormData;f.append("file",r),g(!0),x.importCSV(f).then(()=>{m.success(u.i18n.global.successfully),g(!1)}).catch(()=>{m.error(u.i18n.global.something_went_wrong),g(!1)})}return o(S,{header:u.i18n.global.backup_and_restore,children:o("table",{className:"form-table backup-restore",children:d("tbody",{children:[d("tr",{children:[o("th",{children:u.i18n.global.export}),d("td",{children:[d(D,{children:[o("button",{onClick:i,className:C("button","button-primary",{"updating-message":n}),style:{marginRight:10},children:u.i18n.global.export_now}),t.length?o(de,{uFEFF:!1,filename:"cat_folder",data:t,children:u.i18n.global.download_csv}):null]}),o("p",{children:u.i18n.global.export_desc})]})]}),d("tr",{children:[o("th",{children:u.i18n.global.import}),d("td",{children:[d(D,{children:[o("input",{type:"file",accept:".csv",onChange:l}),o("button",{style:{display:r?"block":"none"},onClick:y,className:C("button",{"updating-message":c}),children:u.i18n.global.import_now})]}),o("p",{children:u.i18n.global.choose_csv_file_to_import})]})]})]})})})},{catfData:pe}=window,ue=()=>o(S,{header:pe.i18n.global.license,children:o(q,{})});const{wp:fe,catfSettings:he,catfData:F}=window,{hooks:me}=fe,be=window.catfData.pluginUrl+"assets/img/logo.svg",ye=()=>{const[t,e]=b.exports.useState("settings"),{pluginsToImport:n}=he,s=a=>{e(a)};let r=[{id:"settings",name:F.i18n.global.settings,content:o(Q,{})},{id:"goPro",name:F.i18n.global.go_pro,content:o(ue,{})},{id:"import",name:F.i18n.global.import,content:d("div",{children:[n.length&&o(Y,{}),o(ge,{}),o(Z,{})]})}];return r=me.applyFilters("catf_setting_tabs",r),d(J,{children:[o("div",{className:"catf-setting-page-head",children:d("nav",{className:"catf-setting-page-tabs-wrapper",children:[d("div",{className:"header-logo",children:[o("img",{src:be}),d("a",{href:"https://wpmediafolders.com/",target:"_blank",rel:"noopener noreferrer",children:["CatFolders",o("sup",{children:K("lite")})]})]}),r.map((a,c)=>o("a",{onClick:()=>{s(a.id)},className:t===a.id?"active":"",children:a.name},a.id))]})}),o("div",{className:"catf-setting-page",children:o("div",{className:"catf-setting-page-content",children:r.map((a,c)=>o("div",{className:"catf-setting-page-container",style:{visibility:t===a.id?"visible":"hidden",display:t===a.id?"block":"none"},children:a.content},c))})})]})};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("catf-setting-app");t&&W.createRoot(t).render(o(ye,{}))});
